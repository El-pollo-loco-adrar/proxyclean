---
import Layout from "../layouts/Layout.astro";
---
<Layout title="Contactez Proxi'Clean | Devis Gratuit" description="Besoin d'un nettoyage de bureaux ou d'une remise en Ã©tat Ã  Toulouse ou en Occitanie ? Demandez votre devis gratuit en ligne.">
    <section class="py-12 bg-theme text-white text-center">
        <h1 class="text-4xl font-bold uppercase tracking-widest">Contactez Proxi'Clean</h1>
        <p class="mt-2 text-lg">Demandez votre devis gratuit en quelques clics</p>
    </section>

    <section class="py-24 bg-gray-50 px-6">
        <div class="max-w-6xl mx-auto bg-white rounded-[2rem] shadow-2xl overflow-hidden flex flex-col md:flex-row min-h-[600px]">
            
            <div class="bg-primaryTheme p-12 md:p-16 text-white md:w-2/5 flex flex-col justify-center">
                <h2 class="text-3xl font-bold mb-6">Un besoin ?</h2>
                <p class="text-lg">N'hÃ©sitez pas Ã  nous contacter via le formulaire.</p>
                
                <div class="mt-12 space-y-6 text-base">
                    <p class="flex items-center gap-4 bg-white/10 p-4 rounded-xl">
                        <span class="text-2xl">ðŸ“§</span> contact@proxiclean-services.fr
                    </p>
                    <p class="flex items-center gap-4 bg-white/10 p-4 rounded-xl">
                        <span class="text-2xl">ðŸ“ž</span> 09 50 28 76 92
                    </p>
                </div> 
            </div>
            
            <form
                id="contact-form"
                class="p-12 md:p-20 flex-1 grid grid-cols-1 gap-6"
                name="contact-proxi-clean"
                method="POST"
                action="https://formspree.io/f/ID_ICI"
            >
                <div class="space-y-2">
                    <label class="text-sm font-semibold text-gray-700 ml-1">Objet</label>
                    <select 
                        name="objet-demande" 
                        class="select select-bordered select-lg w-full focus:outline-secondaryTheme" 
                        required
                    >
                        <option disabled selected value="">Objet de votre demande</option>
                        <option value="devis">Demande de devis</option>
                        <option value="information">Demande d'information</option>
                        <option value="reclamation">RÃ©clamation</option>
                        <option value="autre">Autre...</option>
                    </select>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="space-y-2">
                        <label for="nom" class="text-sm font-semibold text-gray-700 ml-1">Nom / Entreprise</label>
                        <input 
                            id="nom"
                            name="nom"
                            type="text" 
                            placeholder="Ex: Jean Dupont" 
                            class="input input-bordered input-lg w-full focus:outline-secondaryTheme"
                            required
                        />
                    </div>
                    <div class="space-y-2">
                        <label for="email" class="text-sm font-semibold text-gray-700 ml-1">Email</label>
                        <input 
                            id="email"
                            name="email"
                            type="email" 
                            placeholder="jean@exemple.fr" 
                            class="input input-bordered input-lg w-full focus:outline-secondaryTheme" 
                            required
                        />
                    </div>
                </div>

                <div class="flex flex-col gap-1.5">
                    <label for="message" class="text-sm font-semibold text-gray-700 ml-1">Message</label>
                    <textarea 
                        id="message"
                        name="message"
                        placeholder="Comment pouvons-nous vous aider ?" 
                        class="textarea textarea-bordered h-48 w-full text-lg focus:outline-secondaryTheme"
                        required
                    ></textarea>
                </div>

                <button id="submit-btn" type="submit" class="btn btn-lg bg-primaryTheme text-white border-none hover:bg-secondaryTheme transition-colors mt-4">
                    Envoyer le message
                </button>
            </form>

            <div 
                id="toast" 
                class="hidden fixed bottom-5 right-5 bg-green-600 text-white px-8 py-5 rounded-2xl shadow-2xl z-50 transition-all duration-300 transform translate-y-10">
                âœ… Message envoyÃ© avec succÃ¨s !
            </div>

        </div>
    </section>

    <script is:inline>
        const form = document.getElementById('contact-form');
        const toast = document.getElementById('toast');
        const btn = document.getElementById('submit-btn');

        form.addEventListener('submit', async (e) => {
            e.preventDefault(); // EmpÃªche la redirection
            
            btn.disabled = true;
            btn.innerText = "Envoi en cours...";

            const data = new FormData(form);
            
            try {
            const response = await fetch(form.action, {
                method: 'POST',
                body: data,
                headers: { 'Accept': 'application/json' }
            });

            if (response.ok) {
                // Afficher le pop-up
                toast.classList.remove('hidden', 'translate-y-10');
                form.reset(); // Vide le formulaire
                
                // Cacher le pop-up aprÃ¨s 5 secondes
                setTimeout(() => {
                toast.classList.add('hidden', 'translate-y-10');
                }, 5000);
            } else {
                alert("Oups ! Un problÃ¨me est survenu. Veuillez rÃ©essayer.");
            }
            } catch (error) {
            alert("Erreur de connexion. VÃ©rifiez votre rÃ©seau.");
            } finally {
            btn.disabled = false;
            btn.innerText = "Envoyer le message";
            }
        });
    </script>
</Layout>
